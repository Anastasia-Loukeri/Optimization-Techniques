function [a_hist, b_hist, k_hist] = golden_section_history(f, a, b, l_target)

%
% Είσοδοι:
%   f:         Function handle της συνάρτησης.
%   a, b:      Όρια του αρχικού διαστήματος [a, b].
%   l_target:  Το επιθυμητό τελικό μήκος του διαστήματος (L_K <= l_target).

%
% Έξοδοι:
%   a_hist:    Ιστορικό των κάτω ορίων a_k.
%   b_hist:    Ιστορικό των άνω ορίων b_k.
%   k_hist:    Δείκτης επαναλήψεων k.

    rho = (sqrt(5) - 1) / 2; % Ο λόγος: 1/τ ≈ 0.618
    
    ak = a;
    bk = b;
    k = 2; % Δείκτης επαναλήψεων

    % Αρχικοποίηση καταγραφής ιστορικού (k=0)
    a_hist = ak;
    b_hist = bk;
    k_hist = k;
    
    % Υπολογισμός των δύο αρχικών δοκιμαστικών σημείων
    x1 = ak + (1 - rho) * (bk - ak);
    x2 = ak + rho * (bk - ak);
    
    % Υπολογισμός των τιμών
    f_x1 = f(x1);
    f_x2 = f(x2);

    % Βρόχος Επανάληψης
    while (bk - ak) > l_target
        k = k + 1;
        
        % Διερεύνηση και Μείωση Διαστήματος
        if f_x1 < f_x2 % Το ελάχιστο είναι στο [ak, x2]
            bk = x2;
            
            % Το παλιό x1 γίνεται το νέο x2
            x2 = x1;
            f_x2 = f_x1;
            
            % Υπολογισμός του νέου x1
            x1 = ak + (1 - rho) * (bk - ak);
            f_x1 = f(x1);
            
        else % f_x1 >= f_x2 (Το ελάχιστο είναι στο [x1, bk])
            ak = x1;
            
            % Το παλιό x2 γίνεται το νέο x1
            x1 = x2;
            f_x1 = f_x2;
            
            % Υπολογισμός του νέου x2
            x2 = ak + rho * (bk - ak);
            f_x2 = f(x2);
        end
        
        % Αποθήκευση ιστορικού για την τρέχουσα επανάληψη
        a_hist(end+1) = ak;
        b_hist(end+1) = bk;
        k_hist(end+1) = k;
        
        
       
    end
end
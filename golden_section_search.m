function [x_opt, f_opt, N] = golden_section_search(f, a, b, l_target)

%
% Είσοδοι:
%   f:         Function handle της συνάρτησης.
%   a, b:      Όρια του αρχικού διαστήματος [a, b].
%   l_target:  Το επιθυμητό τελικό μήκος του διαστήματος (L_K <= l_target).
%   
%
% Έξοδοι:
%   x_opt:     Η εκτιμώμενη θέση του ελαχίστου.
%   f_opt:     Η τιμή της συνάρτησης στο x_opt.
%   N:         Συνολικός αριθμός υπολογισμών της συνάρτησης.

    rho = (sqrt(5) - 1) / 2; % Ο λόγος: 1/τ ≈ 0.618

    ak = a;
    bk = b;
    
    % 1. Αρχικοποίηση: Υπολογισμός των δύο αρχικών δοκιμαστικών σημείων (x1, x2)
    x1 = ak + (1 - rho) * (bk - ak);
    x2 = ak + rho * (bk - ak);
    
    % Υπολογισμός των τιμών (2 υπολογισμοί)
    f_x1 = f(x1);
    f_x2 = f(x2);
    
    N = 2; % Αρχικοί υπολογισμοί

    % 2. Βρόχος Επανάληψης
    while (bk - ak) > l_target
        
        % Διερεύνηση
        if f_x1 < f_x2 % Η ελάχιστη τιμή βρίσκεται στο [ak, x2]
            % Το νέο διάστημα είναι [ak, x2]
            bk = x2;
            
            % Το παλιό x1 γίνεται το νέο x2, και f(x1) γίνεται f(x2)
            x2 = x1;
            f_x2 = f_x1;
            
            % Υπολογισμός του νέου x1 (χρησιμοποιώντας τον λόγο ρ)
            x1 = ak + (1 - rho) * (bk - ak);
            f_x1 = f(x1); % +1 υπολογισμός
            N = N + 1;
            
        else % f_x1 > f_x2 (Η ελάχιστη τιμή βρίσκεται στο [x1, bk])
            % Το νέο διάστημα είναι [x1, bk]
            ak = x1;
            
            % Το παλιό x2 γίνεται το νέο x1, και f(x2) γίνεται f(x1)
            x1 = x2;
            f_x1 = f_x2;
            
            % Υπολογισμός του νέου x2 (χρησιμοποιώντας τον λόγο ρ)
            x2 = ak + rho * (bk - ak);
            f_x2 = f(x2); % +1 υπολογισμός
            N = N + 1;
        end
        
        
    end
    
    % 3. Τελική Εκτίμηση
    % Το ελάχιστο εκτιμάται στο μέσο του τελικού διαστήματος
    x_opt = (ak + bk) / 2;
    f_opt = f(x_opt); % Τελικός υπολογισμός της f_opt
    % N=N+1;
end